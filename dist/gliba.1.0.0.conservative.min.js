/* Gliba.js v1.0.0 | (c) Cena Studio 2023 | MIT license */ class GlibaConfig{constructor(t,e,r,o,a,i,n,l,s){this.arrResource=GlibaConfig.#standardizeResource(t),"default"===e&&(e=document.body),this.arrContainers=GlibaConfig.#standardizeContainers(e),this.strDirection=r="default"===r?"both":r,this.strSpeed=o="default"===o?"1.8s":o,"default"===a?a=5:"[object Number]"===Object.prototype.toString.call(a)&&(a<1?a=1:9<a&&(a=9)),this.numAmplitude=a,"default"===i?i=5:"[object Number]"===Object.prototype.toString.call(i)&&(i<1?i=1:9<i&&(i=9)),this.numDepth=i,this.booReverse=n="default"===n?!0:n,this.booRebound=l="default"===l?!0:l,this.booPreload=s="default"===s?!0:s}static standardize(s){var t=Object.prototype.toString.call(s);if("[object Array]"===t)return new GlibaConfig(s,"default","default","default","default","default","default","default","default");if("[object Object]"===t){let t="default",e="default",r="default",o="default",a="default",i="default",n="default",l="default";return s.hasOwnProperty("container")&&(t=s.container),s.hasOwnProperty("direction")&&(e=s.direction),s.hasOwnProperty("speed")&&(r=s.speed),s.hasOwnProperty("amplitude")&&(o=s.amplitude),s.hasOwnProperty("depth")&&(a=s.depth),s.hasOwnProperty("reverse")&&(i=s.reverse),s.hasOwnProperty("rebound")&&(n=s.rebound),s.hasOwnProperty("preload")&&(l=s.preload),new GlibaConfig(s.resource,t,e,r,o,a,i,n,l)}}static#standardizeResource(r){var e=r.length;for(let t=0;t<e;t++){let e=r[t];var o=Object.prototype.toString.call(e);if("[object String]"===o||"[object Object]"===o){var a=this.#standardizeImage(e);r[t]=[a]}else if("[object Array]"===o){var i=e.length;for(let t=0;t<i;t++)e[t]=this.#standardizeImage(e[t]);r[t]=e}}return r}static#standardizeImage(t){var e=Object.prototype.toString.call(t);return"[object String]"===e?new GlibaImage(t,"screen"):"[object Object]"===e?t.hasOwnProperty("blendMode")?new GlibaImage(t.url,t.blendMode):new GlibaImage(t.url,"screen"):void 0}static#standardizeContainers(e){let r=[],t=Object.prototype.toString.call(e);if("[object HTMLCollection]"===t){var o=e.length;for(let t=0;t<o;t++)r.push(e[t])}else t.includes("HTML")&&t.includes("Element")&&r.push(e);return r}}class GlibaImage{constructor(t,e){this.url=t,this.blendMode=e="default"===e?"screen":e}}class GlibaEvent{static calcAttractionRatio(t,e,r){return 1-(t-e)/r}static calcRepulsionRatio(t,e,r){return(t-e)/r}}class Gliba{constructor(t,e){this.objConfig=e?GlibaConfig.standardize(t):t,this.arrLayerStretchAmounts=this.#calculateLayerStretchAmount(),this.arrFrames=[],this.#renderDomNodes(),this.#bindEvents(),this.#showFrame()}static initialize(t){return new Gliba(t,!0)}#calculateLayerStretchAmount(){let e=[];var t=this.objConfig,r=t.numAmplitude,o=t.numDepth,a=t.arrResource.length;for(let t=0;t<a;t++){var i=2*Math.pow(((6+o)*t+(5+r)*Math.pow(2,.5))/10,2);e.push(i)}return e}#renderDomNodes(){var t=this.objConfig;let r=t.arrContainers;var o=r.length,a=t.arrResource,i=a.length,n=t.strDirection,l=t.strSpeed;for(let e=0;e<o;e++){let t=document.createElement("div");t.classList.add("gliba_frame"),r[e].insertBefore(t,r[e].firstChild),this.arrFrames.push(t),t.style.cssText="position: absolute; left: 0; right: 0; top: 0; bottom: 0; width: 100%; height: 100%; opacity: 0; overflow: hidden; z-index: -999; transition: opacity 1.5s;";for(let o=0;o<i;o++){let r=document.createElement("div");r.classList.add("gliba_layer"),t.appendChild(r),r.style.position="absolute","both"===n?(r.style.top=-this.arrLayerStretchAmounts[o]/2+"%",r.style.height=this.arrLayerStretchAmounts[o]+100+"%",r.style.left=-this.arrLayerStretchAmounts[o]/2+"%",r.style.width=this.arrLayerStretchAmounts[o]+100+"%",r.style.transition="top "+l+" ease-out, left "+l+" ease-out"):"horizontal"===n?(r.style.top="0",r.style.height="100%",r.style.left=-this.arrLayerStretchAmounts[o]/2+"%",r.style.width=this.arrLayerStretchAmounts[o]+100+"%",r.style.transition="left "+l+" ease-out"):"vertical"===n&&(r.style.top=-this.arrLayerStretchAmounts[o]/2+"%",r.style.height=this.arrLayerStretchAmounts[o]+100+"%",r.style.left="0",r.style.width="100%",r.style.transition="top "+l+" ease-out");var s=a[o].length;for(let e=0;e<s;e++){let t=document.createElement("div");t.classList.add("gliba_image"),r.append(t),t.style.cssText="position: absolute; top: 0; left: 0; right: 0; bottom: 0; width: 100%; height: 100%; background-size: cover; background-position: center center;",t.style.backgroundImage="url("+a[o][e].url+")",t.style.mixBlendMode=a[o][e].blendMode}}}}#bindEvents(){var t=this.objConfig,e=t.arrContainers,r=e.length,i=t.strDirection,n=t.booRebound;let l=this.arrLayerStretchAmounts,s=l.length;t=t.booReverse;let c;c=t?GlibaEvent.calcRepulsionRatio:GlibaEvent.calcAttractionRatio;for(let t=0;t<r;t++){let o=e[t],a=this.arrFrames[t].children;"both"===i?(o.addEventListener("mousemove",function(t){var e=c(t.clientX,o.getBoundingClientRect().left,o.clientWidth),r=c(t.clientY,o.getBoundingClientRect().top,o.clientHeight);for(let t=0;t<s;t++)a[t].style.top=-l[t]*r+"%",a[t].style.left=-l[t]*e+"%"}),n&&o.addEventListener("mouseleave",function(){for(let t=0;t<s;t++){var e=-l[t]/2+"%";a[t].style.top=e,a[t].style.left=e}})):"horizontal"===i?(o.addEventListener("mousemove",function(t){var e=c(t.clientX,o.getBoundingClientRect().left,o.clientWidth);for(let t=0;t<s;t++)a[t].style.left=-l[t]*e+"%"}),n&&o.addEventListener("mouseleave",function(){for(let t=0;t<s;t++)a[t].style.left=-l[t]/2+"%"})):"vertical"===i&&(o.addEventListener("mousemove",function(t){var e=c(t.clientY,o.getBoundingClientRect().top,o.clientHeight);for(let t=0;t<s;t++)a[t].style.top=-l[t]*e+"%"}),n&&o.addEventListener("mouseleave",function(){for(let t=0;t<s;t++)a[t].style.top=-l[t]/2+"%"}))}}#showFrame(){var t=this.objConfig.booPreload;let o=this.arrFrames,a=o.length;if(t){let t=0,e=[],r=[];var i,n=this.objConfig.arrResource,l=n.length;for(let e=0;e<l;e++){var s=n[e].length;for(let t=0;t<s;t++)r.push(n[e][t].url)}for(i in r)e[i]=new Image,e[i].onload=function(){if((t+=1)==r.length)for(let t=0;t<a;t++)o[t].style.opacity="1"},e[i].src=r[i]}else for(let t=0;t<a;t++)o[t].style.opacity="1"}}"function"==typeof jQuery&&$.fn.extend({gliba:function(t){let e=GlibaConfig.standardize(t);e.arrContainers=this.get(),new Gliba(e,!1)}});