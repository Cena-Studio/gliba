class GlibaConfig{constructor(t,e,r,a,n,o,i,l,s){this.arrResource=GlibaConfig.#standardizeResource(t),"default"===e&&(e=document.body),this.arrContainers=GlibaConfig.#standardizeContainers(e),this.strDirection=r="default"===r?"both":r,this.strSpeed=a="default"===a?"1.8s":a,"default"===n?n=5:"[object Number]"===Object.prototype.toString.call(n)&&(n<1?n=1:9<n&&(n=9)),this.numAmplitude=n,"default"===o?o=5:"[object Number]"===Object.prototype.toString.call(o)&&(o<1?o=1:9<o&&(o=9)),this.numDepth=o,this.booReverse=i="default"===i?!0:i,this.booRebound=l="default"===l?!0:l,this.booPreload=s="default"===s?!0:s}static standardize(s){var t=Object.prototype.toString.call(s);if("[object Array]"===t)return new GlibaConfig(s,"default","default","default","default","default","default","default","default");if("[object Object]"===t){let t="default",e="default",r="default",a="default",n="default",o="default",i="default",l="default";return s.hasOwnProperty("container")&&(t=s.container),s.hasOwnProperty("direction")&&(e=s.direction),s.hasOwnProperty("speed")&&(r=s.speed),s.hasOwnProperty("amplitude")&&(a=s.amplitude),s.hasOwnProperty("depth")&&(n=s.depth),s.hasOwnProperty("reverse")&&(o=s.reverse),s.hasOwnProperty("rebound")&&(i=s.rebound),s.hasOwnProperty("preload")&&(l=s.preload),new GlibaConfig(s.resource,t,e,r,a,n,o,i,l)}}static#standardizeResource(r){var e=r.length;for(let t=0;t<e;t++){let e=r[t];var a=Object.prototype.toString.call(e);if("[object String]"===a||"[object Object]"===a){var n=this.#standardizeImage(e);r[t]=[n]}else if("[object Array]"===a){var o=e.length;for(let t=0;t<o;t++)e[t]=this.#standardizeImage(e[t]);r[t]=e}}return r}static#standardizeImage(t){var e=Object.prototype.toString.call(t);return"[object String]"===e?new GlibaImage(t,"screen"):"[object Object]"===e?t.hasOwnProperty("blendMode")?new GlibaImage(t.url,t.blendMode):new GlibaImage(t.url,"screen"):void 0}static#standardizeContainers(e){let r=[],t=Object.prototype.toString.call(e);if("[object HTMLCollection]"===t){var a=e.length;for(let t=0;t<a;t++)r.push(e[t])}else t.includes("HTML")&&t.includes("Element")&&r.push(e);return r}}class GlibaImage{constructor(t,e){this.url=t,this.blendMode=e="default"===e?"screen":e}}class GlibaEvent{static calcAttractionRatio(t,e,r){return(2*(t-e)-r)/200}static calcRepulsionRatio(t,e,r){return(r-2*(t-e))/200}}class Gliba{constructor(t,e){this.objConfig=e?GlibaConfig.standardize(t):t,this.arrImageStretchAmounts=this.#calculateLayerStretchAmount(),this.arrFrames=[],this.#renderDomNodes(),this.#bindEvents(),this.#showFrame()}static initialize(t){return new Gliba(t,!0)}#calculateLayerStretchAmount(){let e=[];var t=this.objConfig,r=t.numAmplitude,a=t.numDepth,n=t.arrResource,o=n.length;for(let t=0;t<o;t++){var i=2*Math.pow(((6+a)*t+(5+r)*Math.pow(2,.5))/10,2),l=n[t].length;for(let t=0;t<l;t++)e.push(i)}return e}#renderDomNodes(){var t=this.objConfig;let e=t.arrContainers;var r=e.length,o=t.arrResource,i=o.length,l=t.strDirection,s=t.strSpeed;for(let t=0;t<r;t++){let a=document.createElement("div"),n=(a.classList.add("gliba_frame"),e[t].insertBefore(a,e[t].firstChild),this.arrFrames.push(a),a.style.cssText="position: absolute; left: 0; right: 0; top: 0; bottom: 0; width: 100%; height: 100%; opacity: 0; overflow: hidden; z-index: -999; transition: opacity 1.5s;",0);for(let r=0;r<i;r++){var c=o[r].length;for(let e=0;e<c;e++){let t=document.createElement("div");t.classList.add("gliba_image"),a.append(t),t.style.cssText="position: absolute; background-size: cover; background-position: center center;",t.style.backgroundImage="url("+o[r][e].url+")",t.style.mixBlendMode=o[r][e].blendMode,t.style.transition="transform "+s+" ease-out","both"===l?(t.style.top=-this.arrImageStretchAmounts[n]/2+"%",t.style.height=this.arrImageStretchAmounts[n]+100+"%",t.style.left=-this.arrImageStretchAmounts[n]/2+"%",t.style.width=this.arrImageStretchAmounts[n]+100+"%"):"horizontal"===l?(t.style.top="0",t.style.height="100%",t.style.left=-this.arrImageStretchAmounts[n]/2+"%",t.style.width=this.arrImageStretchAmounts[n]+100+"%"):"vertical"===l&&(t.style.top=-this.arrImageStretchAmounts[n]/2+"%",t.style.height=this.arrImageStretchAmounts[n]+100+"%",t.style.left="0",t.style.width="100%"),n++}}}}#bindEvents(){var t=this.objConfig,e=t.arrContainers,r=e.length,o=t.strDirection,i=t.booRebound;let l=this.arrImageStretchAmounts,s=l.length;t=t.booReverse;let c;c=t?GlibaEvent.calcRepulsionRatio:GlibaEvent.calcAttractionRatio;for(let t=0;t<r;t++){let a=e[t],n=this.arrFrames[t].children;"both"===o?(a.addEventListener("mousemove",function(t){var e=c(t.clientX,a.getBoundingClientRect().left,a.clientWidth),r=c(t.clientY,a.getBoundingClientRect().top,a.clientHeight);for(let t=0;t<s;t++)n[t].style.transform="translateX("+l[t]*e+"px) translateY("+l[t]*r+"px)"}),i&&a.addEventListener("mouseleave",function(){for(let t=0;t<s;t++)n[t].style.transform="translateX(0%) translateY(0%)"})):"horizontal"===o?(a.addEventListener("mousemove",function(t){var e=c(t.clientX,a.getBoundingClientRect().left,a.clientWidth);for(let t=0;t<s;t++)n[t].style.transform="translateX("+l[t]*e+"px)"}),i&&a.addEventListener("mouseleave",function(){for(let t=0;t<s;t++)n[t].style.transform="translateX(0%)"})):"vertical"===o&&(a.addEventListener("mousemove",function(t){var e=c(t.clientY,a.getBoundingClientRect().top,a.clientHeight);for(let t=0;t<s;t++)n[t].style.transform="translateY("+l[t]*e+"px)"}),i&&a.addEventListener("mouseleave",function(){for(let t=0;t<s;t++)n[t].style.transform="translateY(0%)"}))}}#showFrame(){var t=this.objConfig.booPreload;let a=this.arrFrames,n=a.length;if(t){let t=0,e=[],r=[];var o,i=this.objConfig.arrResource,l=i.length;for(let e=0;e<l;e++){var s=i[e].length;for(let t=0;t<s;t++)r.push(i[e][t].url)}for(o in r)e[o]=new Image,e[o].onload=function(){if((t+=1)==r.length)for(let t=0;t<n;t++)a[t].style.opacity="1"},e[o].src=r[o]}else for(let t=0;t<n;t++)a[t].style.opacity="1"}}"function"==typeof jQuery&&$.fn.extend({gliba:function(t){let e=GlibaConfig.standardize(t);e.arrContainers=this.get(),new Gliba(e,!1)}});